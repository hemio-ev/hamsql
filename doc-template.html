<html>
<body>

$for(modules)$

<h1 id="MODULE-$modules.name$">
    $modules.name$
</h1>

$modules.description$ (module sources: <tt>$modules.internal.load_path$</tt>)

    $if(modules.tables)$
    <h2>Tables</h2>
    
    $for(modules.tables)$
        <h3 id="TABLE-$modules.name$.$modules.tables.name$">
            $modules.tables.name$
        </h3>

        $modules.tables.description$ (table source: <tt>$modules.tables.internal.load_path$</tt>)

        <ul>
            <li>Primary key:
            <ul>
                $for(modules.tables.primary_key)$
                <li>$modules.tables.primary_key$</li>
                $endfor$
            </ul>
            </li>

            $if(modules.tables.foreign_keys)$
            <li>Foreign keys:
                <ol>
                $for(modules.tables.foreign_keys)$
                <li><b>$modules.tables.foreign_keys.name$</b>
                <ul>
                <li>Columns:
                    <ol>
                    $for(modules.tables.foreign_keys.columns)$
                    <li>$modules.tables.foreign_keys.columns$ â†’</li>
                    $endfor$
                    </ol>
                </li>
                <li>Referenced columns:
                    <ol>
                    $for(modules.tables.foreign_keys.ref_columns)$
                    <li><a href="#COLUMN-$modules.tables.foreign_keys.ref_table$.$modules.tables.foreign_keys.ref_columns$">$modules.tables.foreign_keys.ref_table$.$modules.tables.foreign_keys.ref_columns$</a></li>
                    $endfor$
                    </ol>
                </li>
                </ul>
                $endfor$
                </ol>
            </li>
            $endif$

            $if(modules.tables.inherits)$
            <li>
            Inherits:
            <ul>
            $for(modules.tables.inherits)$
            <li><a href="#TABLE-$modules.tables.inherits$">$modules.tables.inherits$</a></li>
            $endfor$
            </ul>
            </li>
            $endif$
        </ul>

        $for(modules.tables.columns)$

            <h4 id="COLUMN-$modules.name$.$modules.tables.name$.$modules.tables.columns.name$">$modules.tables.columns.name$</h4> 
            $modules.tables.columns.description$

            <ul>
                <li>Type: $modules.tables.columns.type$</li>
                $if(modules.tables.columns.null)$
                <li>Can be <i>NULL</i></li>
                $endif$
                $if(modules.tables.columns.default)$
                <li>Default value: $modules.tables.columns.default$</li>
                $endif$
                $if(modules.tables.columns.references)$
                <li>References: <a href="#COLUMN-$modules.tables.columns.references$">$modules.tables.columns.references$</a>
                    <ul>
                        $if(modules.tables.columns.on_ref_delete)$
                        <li>On delete: $modules.tables.columns.on_ref_delete$</li>
                        $endif$
                        $if(modules.tables.columns.on_ref_update)$
                        <li>On update: $modules.tables.columns.on_ref_update$</li>
                        $endif$
                    </ul>
                </li>
                $endif$
            </ul>

        $endfor$

    $endfor$
    $endif$

    $if(modules.functions)$
    <h2>Functions</h2>
    $for(modules.functions)$

        <h3 id ="FUNCTION-$modules.name$.$modules.functions.name$">
            $modules.functions.name$
        </h3>

        $modules.functions.description$ (function source: <tt>$modules.functions.internal.load_path$</tt>)

        <ul>

            <li>Parameters:
                $if(modules.functions.parameters)$
                <ul>
                    $for(modules.functions.parameters)$
                    <li>
                        <b>$modules.functions.parameters.name$</b>
                        <i>$modules.functions.parameters.type$</i>
                        $if(modules.functions.variables.default)$
                        (default: <i>$modules.functions.parameters.default$</i>)
                        $endif$
                        $modules.functions.parameters.description$
                    </li>
                    $endfor$
                </ul>
                $else$
                <i>non</i>
                $endif$
            </li>

            $if(modules.functions.language)$
            <!-- special case: a language is defined -->
            <li>Language: $modules.functions.language$</li>
            $endif$

            $if(modules.functions.variables)$
            <li>Variables defined for body:
                <ul>
                    $for(modules.functions.variables)$
                    <li>
                        <b>$modules.functions.variables.name$</b>
                        <i>$modules.functions.variables.type$</i>
                        $if(modules.functions.variables.default)$
                        (default: <i>$modules.functions.variables.default$</i>)
                        $endif$
                        $modules.functions.variables.description$
                    </li>
                    $endfor$
                </ul>
            </li>
            $endif$

            <li>
                Returns: $modules.functions.return$
            </li>

            $if(modules.functions.internal.return_table)$
            <li>
                Returned columns:
                <ul>
                    $for(modules.functions.return_columns)$
                    <li>
                        <b>$modules.functions.return_columns.name$</b>
                        <i>$modules.functions.return_columns.type$</i>
                        $modules.functions.return_columns.description$
                    </li>
                    $endfor$
                </ul>
            </li>
            $endif$

            $if(modules.functions.priv_execute)$
            <li>
                Execute privilege:
                <ul>
                    $for(modules.functions.priv_execute)$
                    <li><a href="#ROLE-$modules.functions.priv_execute$">
                        $modules.functions.priv_execute$</a></li>
                    $endfor$
                </ul>
            </li>
            $endif$

        </ul>

        Body:
        <pre><code>$modules.functions.body$</code></pre>

    $endfor$
    $endif$

    $if(modules.domains)$
    <h2>Domains</h2>
    $for(modules.domains)$

        <h3 id ="DOMAIN-$modules.name$.$modules.domain.name$">
            $modules.domains.name$
        </h3>

    $endfor$
    $endif$

    $if(modules.roles)$
    <h2>Roles</h2>
    $for(modules.roles)$

        <h3 id ="ROLE-$modules.roles.name$">
            $modules.roles.name$
        </h3>
        $modules.roles.description$
        <ul>
            <li>Login: $modules.roles.login$</li>
        </ul>

    $endfor$
    $endif$

$endfor$

</body>
</html>
